<ion-header>
    <ion-navbar>
      <ion-title *ngFor="let book of book_detail">
        {{book.book_title_nodash}}
      </ion-title>
      <ion-buttons end>
        <div *ngIf="loggedin == false; else loginTrue">
          <button ion-button class="login-indicator-false">
            <ion-icon name="sunny" end></ion-icon>
          </button>
        </div>
        <ng-template #loginTrue>
            <div *ngIf="isFacebookLogin == true">
              <button ion-button class="login-indicator-true">
                <ion-icon name="logo-facebook"></ion-icon>
              </button>
            </div>
            <div *ngIf="isGoogleLogin == true">
              <button ion-button class="login-indicator-true">
                <ion-icon name="logo-googleplus"></ion-icon>
              </button>
            </div>
        </ng-template>
      </ion-buttons>
    </ion-navbar>
  </ion-header>


<ion-content>
  <ion-card *ngFor="let book of book_detail">
    <ion-grid>
      <ion-row>
        <ion-col col-6>
            <div *ngIf="book.book_stikcer == 'New'">
              <div class="cnrflash-new">
                <div class="cnrflash-inner-new">
                    <span class="cnrflash-label-new">
                      NEW
                    </span>
                </div>
              </div>
            </div>
  
            <div *ngIf="book.book_stikcer == 'Popular'">
              <div class="cnrflash-popular">
                <div class="cnrflash-inner-popular">
                    <span class="cnrflash-label-popular">
                      POPULAR
                    </span>
                </div>
              </div>
            </div>
  
            <div *ngIf="book.book_stikcer == 'Recomended'">
              <div class="cnrflash-recomended">
                <div class="cnrflash-inner-recomended">
                    <span class="cnrflash-label-recomended">
                      RECOMENDED
                    </span>
                </div>
              </div>
            </div>
  
            <div *ngIf="book.book_stikcer == 'Editor Pick'">
              <div class="cnrflash-editor-pick">
                <div class="cnrflash-inner-editor-pick">
                    <span class="cnrflash-label-editor-pick">
                      EDITOR <br> PICK
                    </span>
                </div>
              </div>
            </div>

            <img src="http://bukufi.com/storage/book/book_cover/{{book.book_image}}"/>
        </ion-col>
        <ion-col col-6>
          <div>
            <div class="counterRating" *ngIf="isHaveCounter == true">
              <div *ngFor="let counter of book_counter_exist">
                  <ion-icon name="eye"></ion-icon> <b>{{counter.counter}}</b>
              </div>
              
            </div>
          </div>

          <div class="counterRating" *ngIf="isHaveCounter == false">
            <ion-icon name="eye"></ion-icon> <b>0</b>
          </div>

            <!-- batas -->
            
          <div class="counterRating2" *ngIf="isHaveStatistic == true">
            <p text-end class="black">
              <b>{{book_statistic_exist}} % <ion-icon name="thumbs-up"></ion-icon></b>
            </p>
          </div>

          <div *ngIf="isHaveStatistic == false">
            <div class="counterRating2">
              <p text-end class="black">
                <b>No Statistic yet</b>
              </p>
            </div>
          </div>

            <!-- fb: {{isFacebookLogin}} - gp: {{isGoogleLogin}} - LGD {{loggedin}} -->

            <!-- batas -->

          <div *ngIf="loggedin; else loginfirst">
            <!-- <div *ngIf="isHaveBookmark == true">
              <button ion-button outline small block color="secondary" icon-left disabled>
                <ion-icon name="bookmark"></ion-icon>Bookmark
              </button>
            </div> -->
            
            <!-- <div *ngIf="isHaveBookmark == false"> -->
              <button ion-button outline small block color="secondary" icon-left (tap)="addBookmarkBook()">
                <ion-icon name="bookmark"></ion-icon>Bookmark
              </button>
            <!-- </div> -->
          </div>
          <ng-template #loginfirst>
            <button ion-button outline small block color="secondary" icon-left disabled>
              <ion-icon name="bookmark"></ion-icon>Bookmark
            </button>
          </ng-template>

            <!-- batas -->

          <div *ngIf="loggedin; else loginzero">
            <!-- <div *ngIf="isHavefavourite == true; else BookmarkNotFound">
              <button ion-button outline small block icon-left class="btn-2" disabled>
                  <ion-icon name="heart"></ion-icon> Favourite
              </button>
            </div> -->
            <!-- <ng-template #BookmarkNotFound> -->
              <button ion-button outline small block icon-left class="btn-2" (click)="addFavouriteBook()">
                  <ion-icon name="heart"></ion-icon> Favourite
              </button>
            <!-- </ng-template> -->
          </div>

          <ng-template #loginzero>
            <button ion-button outline small block icon-left class="btn-2" disabled>
                <ion-icon name="heart"></ion-icon> Favourite
            </button>
          </ng-template>

            <!-- batas -->

          <div *ngIf="loggedin; else nologin">
            <div *ngIf="isFacebookLogin == true; else googlelogin">
              <div>
                <button ion-button block icon-left (tap)="show(book.book_file)" class="read-btn">
                  <ion-icon ios="ios-book" md="md-book"></ion-icon> Read Book
                </button>
              </div>
            </div>

            <ng-template #googlelogin>
              <button ion-button block icon-left (tap)="show(book.book_file)" class="read-btn">
                <ion-icon ios="ios-book" md="md-book"></ion-icon> Read Book
              </button>
            </ng-template>
          </div>

          <ng-template #nologin>
            <button ion-button block icon-left (tap)="show(book.book_file)" class="read-btn" disabled>
              <ion-icon ios="ios-book" md="md-book"></ion-icon> Read Book
            </button>
          </ng-template>
          
        </ion-col>
        <!-- description area -->
        <ion-col col-12>
          <ion-row class="desc">
            <ion-col col-4 class="no-padding-left-right"><strong>Author</strong></ion-col>
            <ion-col col-1>:</ion-col>
            <ion-col col-7 class="no-padding-left-right no-padd-top-btm">
              <p class="mt-25">{{book.book_author_nodash}}</p>
            </ion-col>
            <hr>
          </ion-row>
          <ion-row class="desc">
            <ion-col col-4 class="no-padding-left-right"><strong>Publisher</strong></ion-col>
            <ion-col col-1>:</ion-col>
            <ion-col col-7 class="no-padding-left-right no-padd-top-btm">
              <p class="mt-25">{{book.book_publisher_nodash}}</p>
            </ion-col>
            <hr>
          </ion-row>
          <ion-row class="desc">
            <ion-col col-4 class="no-padding-left-right"><strong>Year of Release</strong></ion-col>
            <ion-col col-1>:</ion-col>
            <ion-col col-7 class="no-padding-left-right no-padd-top-btm">
              <p class="mt-25">{{book.book_release}}</p>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>

  <!--FAB BOTTOM RIGHT-->
  <ion-fab right bottom #fab2>
    <button ion-fab mini color="primary"><ion-icon name="apps"></ion-icon></button>
    <ion-fab-list side="top">
      <div *ngIf="loggedin == true; else loginfirst">
        <button ion-fab (click)="loginFirst()">
          <ion-icon name="information-circle"></ion-icon>
        </button>
      </div>
      <ng-template #loginfirst>
        <button ion-fab (click)="loginFirst()">
          <ion-icon name="log-in"></ion-icon>
        </button>
      </ng-template>
      <button ion-fab (click)="search()">
        <ion-icon name="search"></ion-icon>
      </button>
    </ion-fab-list>
  </ion-fab>

  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content 
      pullingText="Pull to refresh"
      pullingIcon="arrow-dropdown"
      refreshingSpinner="circles"
      refreshingText="fetching data ...">
    </ion-refresher-content>
  </ion-refresher>
</ion-content>
